{% extends 'base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block title %}
    发布比赛 - 行者骑行软件
{% endblock %}
{% block css %}
<link href="/static/dist/css/bootstrapbase.css" rel="stylesheet">
{% endblock %}
{% block content %}
    {% load filters %}
    <div class="row">
        <div class="span10">
            <form action="" method="post" class="form-horizontal">
                <fieldset>
                    {% csrf_token %}
                    <legend>发布比赛</legend>
                    <div class="control-group">
                        <label class="control-label" for="title">名称</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge" id="title" name="title" placeholder="比赛名称">
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="description">详情</label>
                        <div class="controls">
                            <textarea rows="12" id="description" name="description" class="input-xlarge span8" placeholder="比赛具体信息、比赛规则等"></textarea>
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="min_distance">距离</label>
                        <div class="controls">
                            <input type="text" class="input span1" id="min_distance" name="min_distance" placeholder="">&nbsp;
                            <p class="help-block">可以参与比赛的当天最少距离</p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="price">得分</label>
                        <div class="controls">
                            <input type="text" class="input-small" id="min_score" name="min_score" value="1">&nbsp;&nbsp;至&nbsp;&nbsp;
                            <input type="text" class="input-small" id="max_score" name="max_score" value="10">&nbsp;
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="price">价格</label>
                        <div class="controls">
                            <input type="text" class="input span2" id="price" name="price" placeholder="">&nbsp;
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="icon">图标</label>
                        <div class="controls">
                            <input type="text" class="span5 input-large" id="icon" name="icon" placeholder="">&nbsp;
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="date">日期</label>
                        <div class="controls">
                            <input type="text" class="input-small" id="start_date" name="start_date">
                            &nbsp;
                            <select style="width:60px;" name="start_time">
                                <option value="0">0点</option>
                                <option value="1">1点</option>
                                <option value="2">2点</option>
                                <option value="3">3点</option>
                                <option value="4">4点</option>
                                <option value="5">5点</option>
                                <option value="6">6点</option>
                                <option value="7">7点</option>
                                <option value="8">8点</option>
                                <option value="9">9点</option>
                                <option value="10">10点</option>
                                <option value="11">11点</option>
                                <option value="12">12点</option>
                                <option value="13">13点</option>
                                <option value="14">14点</option>
                                <option value="15">15点</option>
                                <option value="16">16点</option>
                                <option value="17">17点</option>
                                <option value="18">18点</option>
                                <option value="19">19点</option>
                                <option value="20">20点</option>
                                <option value="21">21点</option>
                                <option value="22">22点</option>
                                <option value="23">23点</option>
                            </select>
                            &nbsp;至&nbsp;
                            <input type="text" class="input-small" id="end_date" name="end_date">
                            &nbsp;
                            <select style="width:60px;" name="end_time">
                                <option value="0">0点</option>
                                <option value="1">1点</option>
                                <option value="2">2点</option>
                                <option value="3">3点</option>
                                <option value="4">4点</option>
                                <option value="5">5点</option>
                                <option value="6">6点</option>
                                <option value="7">7点</option>
                                <option value="8">8点</option>
                                <option value="9">9点</option>
                                <option value="10">10点</option>
                                <option value="11">11点</option>
                                <option value="12">12点</option>
                                <option value="13">13点</option>
                                <option value="14">14点</option>
                                <option value="15">15点</option>
                                <option value="16">16点</option>
                                <option value="17">17点</option>
                                <option value="18">18点</option>
                                <option value="19">19点</option>
                                <option value="20">20点</option>
                                <option value="21">21点</option>
                                <option value="22">22点</option>
                                <option value="23">23点</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="order">排序</label>
                        <div class="controls">
                            <input type="text" class="input span2" id="order" name="order" value="0">&nbsp;
                            <p class="help-block">数字越大，排序靠前</p>
                        </div>
                    </div>
                    {% comment %}<div class="control-group">
                        <label class="control-label" for="latlng">位置</label>
                        <div class="controls">
                            <p class="help-block">比赛大概地点</p>
                            <div id="map_canvas" style="height:400px"></div>

                        </div>
                    </div>
                    <input type="hidden" name="latitude" />
                    <input type="hidden" name="longitude" />{% endcomment %}

                    <div class="form-actions">
                        <input type="submit" value="提交" class="btn btn-primary">
                        <span></span>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
{% endblock %}

{% block js %}
    {% comment %}{% baidu_map_api %}
    <script type="text/javascript">
        var map = new BMap.Map("map_canvas");
        map.addControl(new BMap.NavigationControl());
        map.addControl(new BMap.ScaleControl());
        map.addControl(new BMap.OverviewMapControl());
        map.addControl(new BMap.MapTypeControl({mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP]}));
        map.enableScrollWheelZoom();

        var marker;

        var city = new BMap.LocalCity();
        city.get(function (result) {
            map.centerAndZoom(result.center, 12);

            marker = new BMap.Marker(result.center);
            map.addOverlay(marker);
            marker.enableDragging();

            var label = new BMap.Label("鼠标拖拽图标到相应位置", {offset: new BMap.Size(20, -10)});
            marker.setLabel(label);

            marker.addEventListener("dragend", function(e){
                $("input[name='latitude']").val(e.point.lat);
                $("input[name='longitude']").val(e.point.lng);
            });
        });


    </script>{% endcomment %}
{% endblock %}
